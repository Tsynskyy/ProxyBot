# Proxy Bot

Бот для отслеживания, управления и настройки HTTP прокси для работы с двумя типами устройств:

1. **Резидент роутеры**: Устройства, которые подключаются к интернету через проводное соединение.
2. **4G/5G роутеры**: Устройства, которые используют SIM-карту и мобильные сети для подключения к интернету.

## Проверка прокси на работоспособность

Команда `check` предназначен для проверки доступности интернета через прокси-серверы. Бот принимает на вход список прокси-серверов из сообщения или файла txt и выполняет следующие шаги:

1. **Проверка доступности интернета**:
   - Отправляется запрос на сайт `mail.ru`.
   - Если запрос успешен, возвращается сообщение о работоспособности прокси.
   
2. **Проверка неоплаченных услуг**:
   - Если запрос на `mail.ru` неудачен, отправляется запрос на страницу `dev-null.su`, которая указывает на неоплаченные услуги связи.
   - Если запрос на `dev-null.su` успешен, возвращается сообщение о неоплаченных услугах.

3. **Проверка доступности веб-интерфейса роутера**:
   - Если оба предыдущих запроса неудачны, проверяется доступность веб-интерфейса роутера.
   - Если веб-интерфейс доступен, возвращается сообщение о том, что интернет отсутствует.
   - В случае недоступности веб-интерфейса возвращается сообщение о недоступности прокси (не учитывается случай, когда страница веб-интерфейса не соответствует порту).
  
4. **Отправка результатов**: Результаты отправляются в двух файлах: сообщение с файлом результатов и сообщение с файлом неработающих прокси.

## Перезагрузка прокси

Команда `reboot` предназначен для перезагрузки прокси-серверов. Бот принимает на вход список прокси-серверов из сообщения или файла txt и выполняет следующие шаги:

1. **Создание сессии браузера**: С помощью Playwright создается новый браузер в `headless` режиме (без графического интерфейса) с указанными параметрами прокси. Скрипт выполняет автоматический ввод пароля для входа в веб-интерфейс роутера.
2. **Переход на страницу перезагрузки**: После успешного входа скрипт переходит на страницу перезагрузки роутера.
3. **Отправка запроса на перезагрузку**: Скрипт отправляет запрос на перезагрузку роутера.
4. **Обработка ошибок**: На каждом этапе проверяется успешность действия и, в случае ошибки, выводится ее описание с возможной причиной.

## Пинг списка серверов

Команда `ping` предназначен для проверки доступности серверов с помощью инструмента `ping`. Бот принимает на вход список серверов из сообщения или файла txt и выполняет следующие шаги:

1. **Поиск серверов**: Программа ищет во входном тексте адреса серверов используя шаблон IP адреса. В случае отсутствия серверов в тексте, программа просит повторно отправить список.
2. **Проверка доступности списка серверов**: После успешного нахождения адресов программа начинает проверять доступ.
3. **Отправка результатов**: Результаты отправляются в двух сообщениях: список доступных и список недоступных серверов.
